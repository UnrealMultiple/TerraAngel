--- src/Terraria/Terraria/GameInput/PlayerInput.cs
+++ src/TerraAngel/Terraria/GameInput/PlayerInput.cs
@@ -671,7 +_,9 @@
         return _buttonsLocked.Contains(keyName);
     }
 
+    public static void UpdateInput() => TerraAngel.Hooks.MiscHooks.UpdateInputHook(_UpdateInput);
+
-    public static void UpdateInput()
+    private static void _UpdateInput()
     {
         SettingsForUI.UpdateCounters();
         Triggers.Reset();
@@ -1159,8 +_,6 @@
                     MouseY = num11 + num6;
                     flag6 = true;
                 }
-
-                flag = true;
             }
 
             if (CurrentInputMode == InputMode.XBoxGamepad)
@@ -1243,7 +_,9 @@
         return flag;
     }
 
+    private static void MouseInput() => TerraAngel.Hooks.MiscHooks.MouseInputHook(_MouseInput);
+
-    private static void MouseInput()
+    private static void _MouseInput()
     {
         bool flag = false;
         MouseInfoOld = MouseInfo;
@@ -1325,8 +_,6 @@
             {
                 flag2 = true;
             }
-
-            Main.ChromaPainter.PressKey(pressedKeys[i]);
         }
 
         if (Main.blockKey != Keys.None.ToString())
@@ -1537,7 +_,6 @@
             ListenFor(null, InputMode.Keyboard);
             Main.blockKey = newKey;
             Main.blockInput = false;
-            Main.ChromaPainter.CollectBoundKeys();
         }
 
         if (CurrentlyRebinding && _listeningInputMode == InputMode.KeyboardUI)
@@ -1557,7 +_,6 @@
             ListenFor(null, InputMode.KeyboardUI);
             Main.blockKey = newKey;
             Main.blockInput = false;
-            Main.ChromaPainter.CollectBoundKeys();
         }
 
         FixDerpedRebinds();
@@ -1656,7 +_,7 @@
         {
             Main.SmartCursorWanted_GamePad = false;
             Matrix matrix = Main.GameViewMatrix.ZoomMatrix * Main.GameViewMatrix.EffectMatrix;
-            Matrix matrix2 = Matrix.Invert(matrix);
+            Matrix.Invert(matrix, out Matrix matrix2);
             Vector2 vector2 = Vector2.Transform(Main.MouseScreen, matrix2);
             zero.Y *= Main.LocalPlayer.gravDir;
             Vector2 vector3 = Vector2.Transform((vector2 + zero * new Vector2(16f) + Main.screenPosition).ToTileCoordinates().ToWorldCoordinates() - Main.screenPosition, matrix);
